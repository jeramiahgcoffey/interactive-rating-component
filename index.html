<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <!-- displays site properly based on user's device -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="./images/favicon-32x32.png"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Overpass:wght@400;700&display=swap"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
            integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
        <link rel="stylesheet" href="style.css" />
        <title>Frontend Mentor | Interactive rating component</title>
    </head>

    <body>
        <!-- Rating state start -->
        <div class="container">
            <div class="card">
                <div class="star"><i class="fa fa-star"></i></div>
                <div class="heading">How did we do?</div>
                <p>
                    Please let us know how we did with your support request. All
                    feedback is appreciated to help us improve our offering!
                </p>
                <div class="rating-container">
                    <div class="rating" id="1">1</div>
                    <div class="rating" id="2">2</div>
                    <div class="rating" id="3">3</div>
                    <div class="rating" id="4">4</div>
                    <div class="rating" id="5">5</div>
                </div>
                <div>
                    <div class="submit" id="submit">SUBMIT</div>
                </div>
            </div>
        </div>

        <!-- Rating state end -->

        <div class="attribution">
            Challenge by
            <a
                href="https://www.frontendmentor.io?ref=challenge"
                target="_blank"
                >Frontend Mentor</a
            >. Coded by <a href="#">Jeramiah Coffey</a>.
        </div>

        <script>
            let selectedRating = null;
            // Selectors
            const ratingElements = document.getElementsByClassName('rating');
            const submitButton = document.getElementById('submit');

            // Handler functions
            function handleRatingSelect(e) {
                if (selectedRating) {
                    selectedRating.classList.toggle('selected');
                    selectedRating = e.target;
                    selectedRating.classList.toggle('selected');
                } else {
                    selectedRating = e.target;
                    selectedRating.classList.toggle('selected');
                }
            }

            function handleSubmit() {
                if (selectedRating) {
                    selectedRating.classList.toggle('selected');
                    localStorage['rating'] = selectedRating.id;
                    selectedRating = null;
                    window.location.href = './success.html';
                }
            }

            // Add event handlers
            for (const element of ratingElements) {
                element.onclick = (e) => {
                    handleRatingSelect(e);
                };
            }
            submitButton.addEventListener('click', handleSubmit);
        </script>
    </body>
</html>
